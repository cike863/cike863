# 6：图形可视化-图形节点

## 6.1 散点图

### 6.1.1 散点图

![image-20230108075427448](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108075427448.png)

- 散点图

  - x字段：X 轴的字段

  - y字段：Y 轴的字段

  - z字段：Z 轴的字段

  - 交叠字段

    - 颜色：
    - 大小
    - 形状
    - 面板
    - 动画
    - 透明度

  - 交叠字段类型

    - 无

      ![image-20230108075803915](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108075803915.png)

    - 平滑器：使用局部加权回归方法（LOESS）拟合出对应的平滑曲线

      ![image-20230108075732393](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108075732393.png)

    - 函数

- 选项

  ![image-20230108080917925](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108080917925.png)

  - 样式：绘制为散点图还是线图
  - 自动X范围：自动设定X轴的范围，以包含数据集中所有的点
  - 自动Y范围：同上
  - 自动Z范围：同上（在三维散点图才有激活）
  - 散开：当数据集中有大量的重复数据时，每个点会出现重叠的情况，这可能导致结果并不直观。选择散开后，会将重复值随机修订为实际观测值附近的值，经过修订后，图形将变得更加直观
  - 当记录数大于：针对大型数据集绘图的选项。当绘图数据集较大时，可以采用分级或采样提升效率，
    - 选择分级：当数据大于阈值时，将对临近的点进行合并，并以点的大小代表出现的数目
    - 选择样本：将随机抽取阈值数量的样本进行图形绘制，阈值默认为2000

- 外观

  ![image-20230108081017335](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108081017335.png)

  - 标题：图形标题，出现于图形正上方
  - 子标题：图形子标题，出现于标题下方，图形上方
  - 文字说明：针对图形的详细说明，出现于图形正上方
  - X标签、Y标签、Z标签：对应的坐标轴标签
  - 显示网格线：图形是否显示网格线

- 输出

- 注解

### 6.1.2 线图

​	在散点图中包含了线图的绘制

![image-20230108215927057](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108215927057.png)

- X模式 

  - 排序：是最接近普通散点图的绘制模式。当把数据绘制到画布后，按照X轴的取值从左到右依次连线，最终将绘制出一条贯穿左右的连线

    ![image-20230108221259352](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108221259352.png)

  - 交叠字段：线将随着x的增加一直连接绘制，知道x减少才重新开始一条线，因此将绘制多线散点图，该模式毒液时间周期数据的分析特别有效

    ![image-20230108221647972](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108221647972.png)

  - 如所读取：采用按照数据集中的自然顺序进行连线，即第一个记录连接第二个记录，第二个记录连接第三个记录。该模式非常适合用于以及按照时间顺序排序的数据，使用该模式时，即使不添加时间维度，也能很好帮助用户洞察出顺序关联的趋势和模式。

    ![image-20230108222303495](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108222303495.png)

 

​	

### 6.1.3 多重散点图

如果需要在一张图上完成多个变量的趋势比较，呢么可以考虑使用多重散点图。可以把多重散点图看成是“散点图”节点的特列，他可以包含多个Y变量，只是样式被固定为“线”，而“X模式”被固定为“排序”

![image-20230108222825214](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108222825214.png)

- 散点图

  - X字段

  - Y字段

  - 面板

  - 标准化：当需要比较的多个Y变量当这些Y变量直接的数量级并不一致时，使用标准化就很有必要。这事因为在同样的坐标轴体系下，数量级小的变量很可能会由于取值范围的变化趋势及差异并不明细。

    - 未选择标准化

      ![image-20230108223213113](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108223213113.png)

    - 选择标准化

      ![image-20230108223447893](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108223447893.png)

  - 交叠字段函数

  - 当机了大于

    - 分段
    - 采样
    - 使用所有数据

### 6.1.4 时间散点图

时间散点图于多重散点图类型，增加了“选定时间序列模型”功能

- 时间序列设置（数据demo catalog_seasfac.sav）

  - 时间间隔节点

    ![image-20230108234339359](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234339359.png)

    ![image-20230108234403450](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234403450.png)

    - 设置时间散点图

    ![image-20230108234441472](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234441472.png)

    - 结果

      ![image-20230108234511993](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234511993.png)

  - 增加时间序列节点

    ![image-20230108234607339](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234607339.png)

    ![image-20230108234631406](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234631406.png)

    ![image-20230108234655485](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234655485.png)

  - 时间散点图设置

    ![image-20230108235119526](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108235119526.png)

    - 选定序列：效果基本与多重散点图一致

    - 选定时间序列模型：需要与时间序列模型配合使用，将为一个或多个时间序列模型输出相关结果，包括预测值、实际值、置信区间

    - 结果

      ![image-20230108234219215](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230108234219215.png)

      小红点为实际值、紫色线为预测曲线，上下蓝色区域为95%的置信区间

## 6.2 条形图

条形图一般用于分类变量的分析，特别是在进行分类字段与分来字段之间的关系研究时，在进行卡方分析之前常常需要进行条形图。

### 6.2.1 简单条形图

简单条形图能够直接反映分类型变量的分部情况

![image-20230109173904510](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109173904510.png)



- 散点图
  - 散点图
    - 选定字段：将绘制某一个字段的条形图分布
    - 所有标志（true值）：将对所有测量级别被设置为“标记”的变量进行绘制，并只显示取值为真的分布
  - 字段：指定需要分析的分类型字段活标记型字段
  - 交叠字段：可以通过交叠字段绘制堆积条形图，以研究两个分类型变量间的关系
    - 颜色：进行不同类别间相对值的比较，按颜色标准化的每个图案将填满图形的整个幅度
  - 排序
    - 按字母排序
    - 按计数：按照频次排序
  - 比列尺：对条形图进行等比缩放，勾选后，频数最大的条形图将被拉到最长，其他的条形图将按照比例缩放。
- 外观
- 输出
- 注解

### 6.2.2 堆积条形图

简单条形图只能反映某一个单一变量的分布情况，如果需要比较分类变量直接的关系，可以使用堆积条形图

![image-20230109174642691](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109174642691.png)



## 6.3 直方图

直方图和条形图在外观上比较累死，不过研究的对象却完全不同，条形图是研究分类型变了的分布，而直方图则是研究连续变量的分布，尤其是在进行连续与分类字段之间的关系研究时，直方图常用于t检验的前奏，

### 6.3.1 直方图

能够简单反映连续型变量的分布情况

![image-20230109175523677](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109175523677.png)

![image-20230109175655170](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109175655170.png)

![image-20230109180335024](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109180335024.png)

- 散点图
  - 字段
  - 交叠颜色
    - 颜色
    - 面板
    - 动画
- 选项
  - 自动X范围：自动设定x轴的范围，以包含数据集中所有的点
  - 分级：对x轴分箱的处理方式
    - 按数量：指定划分的组数，如值域是0-100，指定分级数为25，则将x轴划分为25组，每组分级宽度为4
    - 按宽度：指定划分的宽度，如值域是0-100，指定宽度为1，则将x轴划分为100组，每组分级宽度为1
  - 按颜色标准化：直方图将被标准化，各组的高度将一致，这样能够更好地比较交叠字段的分布情况
  - 分割每种颜色的带状区域：针对不同颜色的交叠字段将被单独绘制直方图
  - 显示标准曲线：在图中添加标准正态分布曲线，正态曲线的期望和标准差分布等于样本数据的均值和标准差
- 外观
- 输出
- 注解

### 6.3.2 堆积直方图

普通直方图只能反映某个单一连续变量的分布情况，如果需要比较两个变量之间的关系，可以使用堆积直方图

![image-20230109180539927](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109180539927.png)

![image-20230109180759531](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109180759531.png)

![image-20230109180736854](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109180736854.png)



## 6.4 网络

网络节点可以绘制网络图研究分类字段之间的关系，在网络图中，不同的属性之间使用不同的线条进行连接，以显示出这些字段间的关系强弱的程度。

![image-20230109181513078](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109181513078.png)



- 散点图

  - 网络：将创建标准的网络图，其中字段建的线段表示字段将的关系强弱

    ![image-20230109181833651](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109181833651.png)

  - 导向网络：将创建带目标指向的网络图，此选项需要设置目标字段，导向网络图将显示各个字段与目标字段的关系强弱程度。

    ![image-20230109182001304](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109182001304.png)

  - 字段：小加入的图形的字段

  - 仅显示true值标记：将值显示标志字段中为真的取值。可以大大化简最终的网络结构。方便展示

  - 线值为：选择不同的计算方式计算两个字段间线段的数组，

    - 绝对：以链接的绝对数作为线值
    - 总体百分比：以链接的绝对数相比于整个网络图链接的绝对数的比例作为线值，素有链接线值总和为100
    - 较小字段值/只的百分比和较大字段值/值的百分比：考虑到总体百分比的代表性不强，可以选择使用较大或较小的字段值来评计百分比，

  - 强链接较粗：选择线值强弱的不同标识方式。对于较强的链接，网络图将使用较粗的线段表示

  - 弱连接较粗：与上述相反

- 选项

  - 链接数
    - 可显示的最大链接数：在网络图上，显示的最大链接数量
    - 仅显示高于下值的链接：在网络图上，仅显示高于设置值的链接
    - 显示所有链接：无论最大值最小值多少，均显示所有的链接数
  - 弱记录过少则丢弃：设计链接记录数的下限，低于此阈值将被丢弃
  - 弱记录过多则丢弃：设计链接记录数的上限，高于此阈值将被丢弃
  - 弱链接上限：设置弱连接（虚线）和普通链接（普通线条）的阈值，低于此值的链接将被定义为弱连接
  - 强链接下线：设置弱连接（虚线）和普通链接（普通线条）的阈值，高于此值的链接将被定义为强连接
  - 链接大小：用于设定链接大小的显示形式，包括使用“链接大小连续变化”，和“链接大小显示强/正常/弱类别”
  - 网络显示：用于设计网络图的显示类型，包括“圆形布局”、“网络布局”、“定向布局”、“网络布局”

- 外观

- 输出

- 注解

## 6.5 图形扳

考虑到可视化图形种类非常繁多，为每种可视化类型都单独创建一个单独的节点在使用上并不方便，因此SPSS Modeler 将其他常用的可视化图表一并封装到“图形板”节点中

![image-20230109213018555](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109213018555.png)

- 基本
  - 变量选择框：选择一个活多个分析的变量
  - 图形选择框：根据选择的变量以及变量的测量级别自动推荐适合的可视化图表
  - 摘要：根据选择的变量以及可视化图表种类，设定需要显示的汇总统计量，
- 详细
  - 可视化类型：选择可视化图形以及分析变量
  - 可选审美原则及面板与动画：通过交叠字段的方式来添加分析维数
  - 地图文件：如果需要在地图上实现可视化操作，可以指定使用的地图文件
- 外观
- 输出
- 注释

### 6.5.1 气泡图

标准的气泡图适用于三组连续变量的分析，实际上气泡图可以看做散点图的一种变体。

![image-20230109214046490](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109214046490.png)

![image-20230109213823019](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109213823019.png)

![image-20230109213945506](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109213945506.png)

### 6.5.2 散点图矩阵

标准散点图矩阵适用于多组连续型变量的两两比较分析，散点图矩阵实际上是多个散点图的组合，可以看做是散点图的进一步多维拓展形式。借助于散点图矩阵，能够非常直观的观察在多维度数据中变量的两两相关关系。

![image-20230109214408302](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109214408302.png)

![image-20230109214626684](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109214626684.png)



### 6.5.3 箱图

箱图，即箱线图，适用于分析比较连续型变量以及分类变量直接的关系。通过分类的划分，箱线图将刻画连续型变量的5个统计指标，分别是离群值界限、下四分位、中位数、上四分位、上离群值界限

![image-20230109215137397](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109215137397.png)

- 箱图元素的含义

  - 箱体中的黑色深线：中位数，即有一半的数据位于此线的上方，一半的数据位于此线的下方
  - 箱体上部：上四分位，即有75%数据位于此界限的下方
  - 箱体下部：下四分位，即有25%数据位于此界限的下方
  - 上T条形须：上T条形须会向上延伸至箱体高度的1.5倍，作为离散值的界限，该值等于上四分位加上1.5倍的IQR(Inter Quartile Range 四分位差,为上四分位与下四分位的之差)，如果在这个界限值范围内没有观测值，那么上T条形须将改为最大值的位置。
  - 下T条形须：下T条形须会向下延伸至箱体高度的1.5倍，作为离散值的界限，该值等于下四分位减去1.5倍的IQR，如果在这个界限值范围内没有观测值，那么上T条形须将改为最小值的位置。
  - 离群值：在上下离群值界限之外的即离群值，其中，观测值在1.5-3倍之间的用圆圈标识为普通离群值，在3倍之外的用*表示离群值极值

  ![img](https://pic4.zhimg.com/80/v2-78e873eb05df2d32a6f12838622c1d97_1440w.webp)

  ![image-20230109220301017](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109220301017.png)

  ![image-20230109220318278](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109220318278.png)

虽然流失客户与非流水客户的入网时长最大值及最小值接近，但是开明细可以看出，在流程客户中，大部分客户的入网时长要远小于未流失客户

### 6.5.4 聚类箱图

聚类箱图，即多因子箱图，可以看做是对箱图的多维拓展

![image-20230109220521174](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109220521174.png)

![image-20230109220544716](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109220544716.png)

不同性别的入网时长没有明细的差异，而流失客户入网时长明显低于未流失客户

### 6.5.5 热图

热图适合分析两个分类型变量的数值分布情况。通过分类变量的矩阵划分，使用颜色来展示数值变化。

![image-20230109221200198](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109221200198.png)

![image-20230109221528967](http://cdn.luluwanlong.cn/spss-modeler-6-image-20230109221528967.png)

可以看到大学毕业的男性入网时长明细偏低，需要注意是否是由于市场策略的问题而导致的。

