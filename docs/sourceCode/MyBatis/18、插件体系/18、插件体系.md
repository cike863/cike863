# 1ã€åŸç†

## 1. æ¦‚è¿°

æœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥åˆ†äº« MyBatis çš„æ’ä»¶æ¨¡å—ï¼Œå¯¹åº” `plugin` åŒ…ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š[![`scripting` åŒ…](http://static.iocoder.cn/images/MyBatis/2020_03_18/01.png)](http://static.iocoder.cn/images/MyBatis/2020_03_18/01.png)`scripting` åŒ…

åœ¨ [ã€Šç²¾å°½ MyBatis æºç è§£æ â€”â€” é¡¹ç›®ç»“æ„ä¸€è§ˆã€‹](http://svip.iocoder.cn/MyBatis/intro) ä¸­ï¼Œç®€å•ä»‹ç»äº†è¿™ä¸ªæ¨¡å—å¦‚ä¸‹ï¼š

> Mybatis è‡ªèº«çš„åŠŸèƒ½è™½ç„¶å¼ºå¤§ï¼Œä½†æ˜¯å¹¶ä¸èƒ½å®Œç¾åˆ‡åˆæ‰€æœ‰çš„åº”ç”¨åœºæ™¯ï¼Œå› æ­¤ MyBatis æä¾›äº†æ’ä»¶æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶çš„æ–¹å¼å¯¹ MyBatis è¿›è¡Œæ‰©å±•ã€‚ç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶ä¹Ÿå¯ä»¥æ”¹å˜ Mybatis çš„é»˜è®¤è¡Œä¸ºï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¦æˆª SQL è¯­å¥å¹¶å¯¹å…¶è¿›è¡Œé‡å†™ã€‚
>
> ç”±äºç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶ä¼šå½±å“ MyBatis çš„æ ¸å¿ƒè¡Œä¸ºï¼Œåœ¨ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶ä¹‹å‰ï¼Œå¼€å‘äººå‘˜éœ€è¦äº†è§£ MyBatis å†…éƒ¨çš„åŸç†ï¼Œè¿™æ ·æ‰èƒ½ç¼–å†™å‡ºå®‰å…¨ã€é«˜æ•ˆçš„æ’ä»¶ã€‚

- æ€»çš„æ¥è¯´ï¼ŒMyBatis çš„æ’ä»¶ï¼Œè¿˜æ˜¯åŸºäº**åŠ¨æ€ä»£ç†**æ¥å®ç°ã€‚æ‰€ä»¥ï¼ŒğŸ˜ˆ èƒ–å‹æœ‰æ²¡å‘ç°ï¼ŒåŠ¨æ€ä»£ç†ï¼Œæ— å¤„ä¸åœ¨ã€‚å˜¿å˜¿ã€‚
- å¦å¤–ï¼Œèƒ–å‹å…ˆçœ‹çœ‹ [ã€ŠMyBatis å®˜æ–¹æ–‡æ¡£ â€”â€” æ’ä»¶ã€‹](http://www.mybatis.org/mybatis-3/zh/configuration.html#plugins) æ–‡æ¡£ï¼Œå¯¹ MyBatis æ’ä»¶çš„æ¦‚å¿µå’Œé…ç½®ï¼Œå†æœ‰ä¸€ä¸ªäº†è§£ã€‚

æœ¬æ–‡æ¶‰åŠçš„ç±»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š[![ç±»å›¾](http://static.iocoder.cn/images/MyBatis/2020_03_18/02.png)](http://static.iocoder.cn/images/MyBatis/2020_03_18/02.png)ç±»å›¾

ä¸‹é¢ï¼Œæˆ‘ä»¬é€ä¸ªç±»æ¥ç…ç…ã€‚

## 2. Interceptor

`org.apache.ibatis.plugin.Interceptor` ï¼Œæ‹¦æˆªå™¨æ¥å£ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// Interceptor.java

public interface Interceptor {

    /**
     * æ‹¦æˆªæ–¹æ³•
     *
     * @param invocation è°ƒç”¨ä¿¡æ¯
     * @return è°ƒç”¨ç»“æœ
     * @throws Throwable è‹¥å‘ç”Ÿå¼‚å¸¸
     */
    Object intercept(Invocation invocation) throws Throwable;

    /**
     * åº”ç”¨æ’ä»¶ã€‚å¦‚åº”ç”¨æˆåŠŸï¼Œåˆ™ä¼šåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡
     *
     * @param target ç›®æ ‡å¯¹è±¡
     * @return åº”ç”¨çš„ç»“æœå¯¹è±¡ï¼Œå¯ä»¥æ˜¯ä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ target å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ã€‚å…·ä½“çš„ï¼Œçœ‹ä»£ç å®ç°
     */
    Object plugin(Object target);

    /**
     * è®¾ç½®æ‹¦æˆªå™¨å±æ€§
     *
     * @param properties å±æ€§
     */
    void setProperties(Properties properties);

}
```

- å…³äºä¸‰ä¸ªæ–¹æ³•ï¼Œèƒ–å‹çœ‹çœ‹ä»£ç æ³¨é‡Šã€‚

#### 2.1 ç¤ºä¾‹

æˆ‘ä»¬æ¥çœ‹çœ‹ `org.apache.ibatis.plugin.PluginTest` ï¼Œæä¾›äº† AlwaysMapPlugin ç¤ºä¾‹ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
@Intercepts({
        @Signature(type = Map.class, method = "get", args = {Object.class})}) // <1>
public static class AlwaysMapPlugin implements Interceptor {

    @Override // <4>
    public Object intercept(Invocation invocation) throws Throwable {
        return "Always";
    }

    @Override // <2>
    public Object plugin(Object target) {
        return Plugin.wrap(target, this);
    }

    @Override // <3>
    public void setProperties(Properties properties) {
    }

}
```

- `<1>` å¤„ï¼Œé€šè¿‡ `@Intercepts` å’Œ `@Signature` æ³¨è§£ï¼Œå®šä¹‰äº†éœ€è¦æ‹¦æˆªçš„æ–¹æ³•ä¸º Map ç±»å‹ã€æ–¹æ³•ä¸º `"get"` æ–¹æ³•ï¼Œæ–¹æ³•å‚æ•°ä¸º `Object.class` ã€‚è¯¦ç»†è§£æï¼Œè§ TODOã€‚
- `<2>` å¤„ï¼Œåœ¨å®ç°æ–¹æ³• `#plugin(Object target)` æ–¹æ³•å†…éƒ¨ï¼Œä»–è°ƒç”¨ `Plugin#wrap(Object target, Interceptor interceptor)` æ–¹æ³•ï¼Œæ‰§è¡Œä»£ç†å¯¹è±¡çš„åˆ›å»ºã€‚è¯¦ç»†è§£æï¼Œè§ TODOã€‚
- `<3>` å¤„ï¼Œåœ¨å®ç°æ–¹æ³• `#setProperties(Properties properties)` æ–¹æ³•å†…éƒ¨ï¼Œæš‚æœªåšä»»ä½•å®ç°ã€‚æ­¤å¤„å¯ä»¥å®ç°ï¼Œè‹¥ AlwaysMapPlugin æœ‰å±æ€§ï¼Œå¯ä»¥ä» `properties` è·å–ä¸€äº›éœ€è¦çš„å±æ€§å€¼ã€‚
- `<4>` å¤„ï¼Œåœ¨å®ç°æ–¹æ³• `#intercept(Invocation invocation)` æ–¹æ³•ï¼Œç›´æ¥è¿”å› `"Always"` å­—ç¬¦ä¸²ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ‰€æœ‰çš„ `target` ç±»å‹ä¸º Map ç±»å‹ï¼Œå¹¶ä¸”è°ƒç”¨ `Map#get(Object)` æ–¹æ³•æ—¶ï¼Œè¿”å›çš„éƒ½æ˜¯ `"Always"` ã€‚

è¿™ä¸ªç¤ºä¾‹ï¼Œèƒ–å‹å¯ä»¥è·‘ä¸‹ PluginTest å•å…ƒæµ‹è¯•é‡Œçš„æ–¹æ³•ï¼Œå¯ä»¥æ›´åŠ å¥½ç†è§£ã€‚

#### 2.2 Invocation

`org.apache.ibatis.plugin.Invocation` ï¼Œæ–¹æ³•è°ƒç”¨ä¿¡æ¯ï¼Œä½œä¸º `Interceptor#intercept(Invocation invocation)` çš„æ–¹æ³•å‚æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// Invocation.java

public interface Interceptor {

    /**
     * æ‹¦æˆªæ–¹æ³•
     *
     * @param invocation è°ƒç”¨ä¿¡æ¯
     * @return è°ƒç”¨ç»“æœ
     * @throws Throwable è‹¥å‘ç”Ÿå¼‚å¸¸
     */
    Object intercept(Invocation invocation) throws Throwable;

    /**
     * åº”ç”¨æ’ä»¶ã€‚å¦‚åº”ç”¨æˆåŠŸï¼Œåˆ™ä¼šåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡
     *
     * @param target ç›®æ ‡å¯¹è±¡
     * @return åº”ç”¨çš„ç»“æœå¯¹è±¡ï¼Œå¯ä»¥æ˜¯ä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ target å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ã€‚å…·ä½“çš„ï¼Œçœ‹ä»£ç å®ç°
     */
    Object plugin(Object target);

    /**
     * è®¾ç½®æ‹¦æˆªå™¨å±æ€§
     *
     * @param properties å±æ€§
     */
    void setProperties(Properties properties);

}
```

## 3. InterceptorChain

`org.apache.ibatis.plugin.InterceptorChain` ï¼Œæ‹¦æˆªå™¨ Interceptor é“¾ã€‚

#### 3.1 æ„é€ æ–¹æ³•

```
// InterceptorChain.java

/**
 * æ‹¦æˆªå™¨æ•°ç»„
 */
private final List<Interceptor> interceptors = new ArrayList<>();
```

#### 3.2 addInterceptor

`#addInterceptor(Interceptor interceptor)` æ–¹æ³•ï¼Œæ·»åŠ æ‹¦æˆªå™¨ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// InterceptorChain.java

public void addInterceptor(Interceptor interceptor) {
    interceptors.add(interceptor);
}
```

------

è¯¥æ–¹æ³•åœ¨ Configuration çš„ `#pluginElement(XNode parent)` æ–¹æ³•ä¸­è¢«è°ƒç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
// XMLConfigBuilder.java

/**
 * è§£æ <plugins /> æ ‡ç­¾ï¼Œæ·»åŠ åˆ° {@link Configuration#interceptorChain} ä¸­
 *
 * @param parent èŠ‚ç‚¹
 * @throws Exception å‘ç”Ÿå¼‚å¸¸æ—¶
 */
private void pluginElement(XNode parent) throws Exception {
    if (parent != null) {
        // éå† <plugins /> æ ‡ç­¾
        for (XNode child : parent.getChildren()) {
            String interceptor = child.getStringAttribute("interceptor");
            Properties properties = child.getChildrenAsProperties();
            // <1> åˆ›å»º Interceptor å¯¹è±¡ï¼Œå¹¶è®¾ç½®å±æ€§
            Interceptor interceptorInstance = (Interceptor) resolveClass(interceptor).newInstance();
            interceptorInstance.setProperties(properties);
            // æ·»åŠ åˆ° configuration ä¸­
            configuration.addInterceptor(interceptorInstance);
        }
    }
}
```

- `<1>` å¤„ï¼Œåˆ›å»º Interceptor å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ `Interceptor#setProperties(properties)` æ–¹æ³•ï¼Œè®¾ç½®æ‹¦æˆªå™¨çš„å±æ€§ã€‚

- `<2>` å¤„ï¼Œè°ƒç”¨ `Configuration#addInterceptor(interceptorInstance)` æ–¹æ³•ï¼Œæ·»åŠ åˆ° `Configuration.interceptorChain` ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š

  ```
  // Configuration.java
  
  /**
   * æ‹¦æˆªå™¨é“¾
   */
  protected final InterceptorChain interceptorChain = new InterceptorChain();
  
  public void addInterceptor(Interceptor interceptor) {
      interceptorChain.addInterceptor(interceptor);
  }
  ```

#### 3.3 pluginAll

`#pluginAll(Object target)` æ–¹æ³•ï¼Œåº”ç”¨æ‰€æœ‰æ‹¦æˆªå™¨åˆ°æŒ‡å®šç›®æ ‡å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// InterceptorChain.java

public Object pluginAll(Object target) {
    for (Interceptor interceptor : interceptors) {
        target = interceptor.plugin(target);
    }
    return target;
}
```

------

è¯¥æ–¹æ³•è¢« Configuration çš„å¦‚ä¸‹å››å¤„æ–¹æ³•ä¸­è°ƒç”¨ï¼š[![è°ƒç”¨å¤„](http://static.iocoder.cn/images/MyBatis/2020_03_18/03.png)](http://static.iocoder.cn/images/MyBatis/2020_03_18/03.png)è°ƒç”¨å¤„

- ä¸€å…±å¯ä»¥æœ‰å››ç§ç›®æ ‡å¯¹è±¡ç±»å‹å¯ä»¥è¢«æ‹¦æˆªï¼š1ï¼‰Executorï¼›2ï¼‰StatementHandlerï¼›3ï¼‰ParameterHandlerï¼›4ï¼‰ResultSetHandler ã€‚

## 4. @Intercepts

`org.apache.ibatis.plugin.@Intercepts` ï¼Œæ‹¦æˆªå™¨æ³¨è§£ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// Intercepts.java

@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface Intercepts {

    /**
     * @return æ‹¦æˆªçš„æ–¹æ³•ç­¾åçš„æ•°ç»„
     */
    Signature[] value();

}
```

#### 4.1 @Signature

`org.apache.ibatis.plugin.@Signature` ï¼Œæ–¹æ³•ç­¾åçš„æ³¨è§£ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// Signature.java

@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target({})
public @interface Signature {

    /**
     * @return ç±»
     */
    Class<?> type();

    /**
     * @return æ–¹æ³•å
     */
    String method();

    /**
     * @return å‚æ•°ç±»å‹
     */
    Class<?>[] args();

}
```

## 5. Plugin

`org.apache.ibatis.plugin.Plugin` ï¼Œå®ç° InvocationHandler æ¥å£ï¼Œæ’ä»¶ç±»ï¼Œä¸€æ–¹é¢æä¾›åˆ›å»ºåŠ¨æ€ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œå¦ä¸€æ–¹é¢å®ç°å¯¹æŒ‡å®šç±»çš„æŒ‡å®šæ–¹æ³•çš„æ‹¦æˆªå¤„ç†ã€‚

æ³¨æ„ï¼ŒPlugin æ˜¯ MyBatis æ’ä»¶ä½“ç³»çš„æ ¸å¿ƒç±»ã€‚

#### 5.1 æ„é€ æ–¹æ³•

```
// Plugin.java

/**
 * ç›®æ ‡å¯¹è±¡
 */
private final Object target;
/**
 * æ‹¦æˆªå™¨
 */
private final Interceptor interceptor;
/**
 * æ‹¦æˆªçš„æ–¹æ³•æ˜ å°„
 *
 * KEYï¼šç±»
 * VALUEï¼šæ–¹æ³•é›†åˆ
 */
private final Map<Class<?>, Set<Method>> signatureMap;

private Plugin(Object target, Interceptor interceptor, Map<Class<?>, Set<Method>> signatureMap) {
    this.target = target;
    this.interceptor = interceptor;
    this.signatureMap = signatureMap;
}
```

#### 5.2 wrap

`#wrap(Object target, Interceptor interceptor)` **é™æ€**æ–¹æ³•ï¼Œåˆ›å»ºç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š

```
// Plugin.java

public static Object wrap(Object target, Interceptor interceptor) {
    // <1> è·å¾—æ‹¦æˆªçš„æ–¹æ³•æ˜ å°„
    Map<Class<?>, Set<Method>> signatureMap = getSignatureMap(interceptor);
    // <2> è·å¾—ç›®æ ‡ç±»çš„ç±»å‹
    Class<?> type = target.getClass();
    // <2> è·å¾—ç›®æ ‡ç±»çš„æ¥å£é›†åˆ
    Class<?>[] interfaces = getAllInterfaces(type, signatureMap);
    // <3.1> è‹¥æœ‰æ¥å£ï¼Œåˆ™åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ JDK Proxy å¯¹è±¡
    if (interfaces.length > 0) {
        return Proxy.newProxyInstance(
                type.getClassLoader(),
                interfaces,
                new Plugin(target, interceptor, signatureMap)); // å› ä¸º Plugin å®ç°äº† InvocationHandler æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸º JDK åŠ¨æ€ä»£ç†çš„è°ƒç”¨å¤„ç†å™¨
    }
    // <3.2> å¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿”å›åŸå§‹çš„ç›®æ ‡å¯¹è±¡
    return target;
}
```

- `<1>` å¤„ï¼Œè°ƒç”¨ `#getSignatureMap(Interceptor interceptor)` æ–¹æ³•ï¼Œè·å¾—æ‹¦æˆªçš„æ–¹æ³•æ˜ å°„ã€‚ä»£ç å¦‚ä¸‹ï¼š

  ```
  // Plugin.java
  
  private static Map<Class<?>, Set<Method>> getSignatureMap(Interceptor interceptor) {
      Intercepts interceptsAnnotation = interceptor.getClass().getAnnotation(Intercepts.class);
      // issue #251
      if (interceptsAnnotation == null) {
          throw new PluginException("No @Intercepts annotation was found in interceptor " + interceptor.getClass().getName());
      }
      Signature[] sigs = interceptsAnnotation.value();
      Map<Class<?>, Set<Method>> signatureMap = new HashMap<>();
      for (Signature sig : sigs) {
          Set<Method> methods = signatureMap.computeIfAbsent(sig.type(), k -> new HashSet<>());
          try {
              Method method = sig.type().getMethod(sig.method(), sig.args());
              methods.add(method);
          } catch (NoSuchMethodException e) {
              throw new PluginException("Could not find method on " + sig.type() + " named " + sig.method() + ". Cause: " + e, e);
          }
      }
      return signatureMap;
  }
  ```

  - åŸºäº `@Intercepts` å’Œ `@Signature` æ³¨è§£ã€‚

- `<2>` å¤„ï¼Œè°ƒç”¨ `#getAllInterfaces(Class<?> type, Map<Class<?>, Set<Method>> signatureMap)` æ–¹æ³•ï¼Œè·å¾—ç›®æ ‡ç±»çš„æ¥å£é›†åˆã€‚ä»£ç å¦‚ä¸‹ï¼š

  ```
  // Plugin.java
  
  private static Class<?>[] getAllInterfaces(Class<?> type, Map<Class<?>, Set<Method>> signatureMap) {
      // æ¥å£çš„é›†åˆ
      Set<Class<?>> interfaces = new HashSet<>();
      // å¾ªç¯é€’å½’ type ç±»ï¼Œæœºå™¨çˆ¶ç±»
      while (type != null) {
          // éå†æ¥å£é›†åˆï¼Œè‹¥åœ¨ signatureMap ä¸­ï¼Œåˆ™æ·»åŠ åˆ° interfaces ä¸­
          for (Class<?> c : type.getInterfaces()) {
              if (signatureMap.containsKey(c)) {
                  interfaces.add(c);
              }
          }
          // è·å¾—çˆ¶ç±»
          type = type.getSuperclass();
      }
      // åˆ›å»ºæ¥å£çš„æ•°ç»„
      return interfaces.toArray(new Class<?>[interfaces.size()]);
  }
  ```

  - ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œ`@Signature` æ³¨è§£çš„ `type` å±æ€§ï¼Œå¿…é¡»æ˜¯**æ¥å£**ã€‚

- `<3.1>` å¤„ï¼Œ**æƒ…å†µä¸€**ï¼Œè‹¥æœ‰æ¥å£ï¼Œåˆ™åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ JDK Proxy å¯¹è±¡ã€‚

- `<3.2>` å¤„ï¼Œ**æƒ…å†µäºŒ**ï¼Œè‹¥æ— æ¥å£ï¼Œåˆ™è¿”å›åŸå§‹çš„ç›®æ ‡å¯¹è±¡ã€‚

#### 5.3 invoke

```
// Plugin.java

@Override
public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
    try {
        // è·å¾—ç›®æ ‡æ–¹æ³•æ˜¯å¦è¢«æ‹¦æˆª
        Set<Method> methods = signatureMap.get(method.getDeclaringClass());
        if (methods != null && methods.contains(method)) {
            // å¦‚æœæ˜¯ï¼Œåˆ™æ‹¦æˆªå¤„ç†è¯¥æ–¹æ³•
            return interceptor.intercept(new Invocation(target, method, args));
        }
        // å¦‚æœä¸æ˜¯ï¼Œåˆ™è°ƒç”¨åŸæ–¹æ³•
        return method.invoke(target, args);
    } catch (Exception e) {
        throw ExceptionUtil.unwrapThrowable(e);
    }
}
```

- å…·ä½“ï¼Œè§ä»£ç æ³¨é‡Šã€‚ç®€å•~

# 2ã€PageHelper

[Mybatis-PageHelper](https://github.com/pagehelper/Mybatis-PageHelper) ï¼ŒåŸºäº MyBatis æ’ä»¶ä½“ç³»ï¼Œå®ç°äº†**åˆ†é¡µ**åŠŸèƒ½ã€‚æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹å®ƒçš„æºç ã€‚è‰¿è‰¿æš‚æ—¶ä¸æ˜¯ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œå› ä¸ºï¼š

1. å›¢é˜Ÿç›®å‰ä¸»è¦ä»¥æ‰‹å†™ SQL ä¸ºä¸»ï¼Œæˆ–è€…è‡ªåŠ¨ç”Ÿæˆ SQL ä¸ºè¾…ã€‚
2. [MyBatis-Plus](https://github.com/baomidou/mybatis-plus) ä¹Ÿæä¾›äº†åˆ†é¡µæ’ä»¶ï¼Œå¹¶ä¸”æ®è‰¿è‰¿äº†è§£åˆ°ï¼Œå¯èƒ½æ›´åŠ å¹¿æ³›ã€‚å®ƒçš„åˆ†é¡µæ’ä»¶çš„æ‹¦æˆªå™¨æ˜¯ `com.baomidou.mybatisplus.plugins.PaginationInterceptor` ï¼Œå…·ä½“å¯å‚è§æ–‡æ¡£ [ã€ŠMyBatis-Plus æ–‡æ¡£ â€”â€” åˆ†é¡µæ’ä»¶ã€‹](http://mp.baomidou.com/guide/page.html) ã€‚

å½“ç„¶ï¼Œè€ƒè™‘åˆ°èƒ–å‹å¯èƒ½æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œè‰¿è‰¿è¿˜æ˜¯ç¿»äº†ç¿»ç›®å‰ç½‘ç»œä¸Šçš„æ–‡ç« ï¼Œç›®å‰å†™çš„æ¯”è¾ƒå¥½çš„æ˜¯ï¼š

- ç¥–å¤§ä¿Šã€ŠMybatis3.4.xæŠ€æœ¯å†…å¹•ï¼ˆäºŒåï¼‰ï¼šPageHelperåˆ†é¡µæ’ä»¶æºç åŠåŸç†å‰–æã€‹
  - å› ä¸ºå†™çš„æ¯”è¾ƒæ—©ï¼Œæ‰€ä»¥å¯¹åº”çš„ [Mybatis-PageHelper](https://github.com/pagehelper/Mybatis-PageHelper) çš„ä»£ç æ¯”è¾ƒæ—©ï¼Œæ‰€ä»¥å’Œç›®å‰çš„ä»£ç ï¼Œå·²ç»å¯¹åº”ä¸ä¸Šäº†ã€‚
- ã€**ç›¸å¯¹æ¨è**ã€‘ä¸€ç›´ä¸æ‡‚ [ã€Šã€Mybatisæºç åˆ†æã€‘12-æ’ä»¶PageHelperæœºåˆ¶ã€‹](https://blog.csdn.net/shenchaohao12321/article/details/80168655)